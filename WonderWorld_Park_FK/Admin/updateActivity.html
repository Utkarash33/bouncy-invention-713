<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Activity</title>
</head>
<body>
    <h1>Update Activity</h1>
    
    <form id="updateForm">
        <label for="activityName">Activity Name:</label>
        <input type="text" id="activityName" name="activityName" required><br><br>

        <label for="distance">Distance:</label>
        <input type="number" id="distance" name="distance" required><br><br>

        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" required><br><br>

        <input type="submit" value="Update Activity">
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const updateForm = document.getElementById("updateForm");

            updateForm.addEventListener("submit", function (event) {
                event.preventDefault();

                const jwtToken = getCookie();

                const activityId = sessionStorage.getItem("id"); 

                const updatedActivity = {
                    activityName: document.getElementById("activityName").value,
                    distance: parseFloat(document.getElementById("distance").value),
                    price: parseFloat(document.getElementById("price").value)
                };

                fetch(`http://localhost:8888/admin/activity/update/${activityId}`, {
                    method: 'PUT',
                    headers: {
                        "Authorization": `Bearer ${jwtToken}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(updatedActivity)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    console.log(`Activity with ID ${activityId} updated successfully.`);
                    window.location.href = "admin.html";
                    
                })
                .catch(error => {
                    console.error("Update error:", error);
                });
            });
        });

        function getCookie() {
    const value =  document.cookie;
    
    const parts = value.split("=");
    
    return parts[1];
}
    </script>
</body>
</html>